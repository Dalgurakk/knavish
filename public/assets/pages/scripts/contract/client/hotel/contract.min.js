$(document).ready(function(){var r=!1;$("#modal-add .btn-contract-details").on("click",function(){$("#modal-add .contract-details").each(function(){$(this).hasClass("hidden")?$(this).removeClass("hidden"):$(this).addClass("hidden")})}),$("#modal-info .btn-contract-details").on("click",function(){$("#modal-info .contract-details").each(function(){$(this).hasClass("hidden")?$(this).removeClass("hidden"):$(this).addClass("hidden")})}),$("#modal-edit .btn-contract-details").on("click",function(){$("#modal-edit .contract-details").each(function(){$(this).hasClass("hidden")?$(this).removeClass("hidden"):$(this).addClass("hidden")})}),$.fn.dataTable.ext.errMode="none";var g=$("#table").on("error.dt",function(a,e,t,n){}).on("processing.dt",function(a,e,t){App.showMask(t,$(this)),App.reloadToolTips()}).on("init.dt",function(){}).DataTable({processing:!0,serverSide:!0,sDom:"ltip",iDisplayLength:25,ajax:{url:routeRead,type:"POST",complete:function(a,e){"419"==a.status?location.reload(!0):"200"!=a.status&&toastr.error("Please check your connection and try again.","Error on loading the content"),$(".br-readonly").on("click",function(a){a.preventDefault()})}},order:[[1,"asc"]],columns:[{data:"id",name:"id",visible:!1},{data:"name",name:"name"},{data:"location",name:"location",orderable:!1},{data:"client",name:"client",orderable:!1},{data:"valid_from",name:"valid_from",orderable:!1},{data:"valid_to",name:"valid_to",orderable:!1},{data:"status",name:"status",orderable:!1,data:function(a,e,t,n){var o="";return"3"==a.status?o='<span class="label label-sm label-danger"> Finished </span>':"2"==a.status?o='<span class="label label-sm label-success"> In Progress </span>':"1"==a.status&&(o='<span class="label label-sm label-warning"> Pending </span>'),o}},{data:"active",name:"active",className:"dt-center",data:function(a,e,t,n){var o='<span><i class="fa fa-close dt-active dt-active-0"></i></span>';return 1==a.active&&(o='<span><i class="fa fa-check dt-active dt-active-1"></i></span>'),o}},{targets:"actions",orderable:!1,name:"actions",className:"dt-center",data:function(a,e,t,n){return'<form method="get" action="'+routeSetting+'"><input type="hidden" name="id" value="'+a.id+'"><div class="dt-actions"><a class="btn btn-default btn-circle btn-icon-only btn-action dt-view" data-toggle="modal" href="#modal-info"><i class="glyphicon glyphicon-eye-open btn-action-icon"></i></a><a class="btn btn-default btn-circle btn-icon-only btn-action dt-edit" data-toggle="modal" href="#modal-edit"><i class="icon-pencil btn-action-icon"></i></a><a class="btn btn-default btn-circle btn-icon-only btn-action dt-delete" href="javascript:;" data-popout="true" data-placement="left"data-btn-ok-label="Yes" data-btn-ok-class="btn-sm btn-success"  data-btn-ok-icon-content="check" data-btn-cancel-label="No" data-btn-cancel-class="btn-sm btn-danger" data-btn-cancel-icon-content="close" data-title="Are you sure?" data-content=""><i class="icon-trash btn-action-icon"></i></a><button type="submit" class="btn btn-default btn-circle btn-icon-only btn-action dt-setting"><i class="icon-settings btn-action-icon"></i></button></div></form>'}}]});$("#table_length").hide(),$(".search").on("click",function(a){$("#search-section").slideToggle()}),$(".reload").on("click",function(a){g.draw()}),$(".add").on("click",function(){$("#modal-add .contract-details").each(function(){$(this).hasClass("hidden")||$(this).addClass("hidden")}),d.validate().resetForm(),d[0].reset(),$("#modal-add :input[name=category]").barrating("set",""),v.api().clear().draw(),b.api().clear().draw(),f.api().clear().draw(),$("#modal-add .select-client").val(null).trigger("change"),$("#modal-add .select-contract").val(null).trigger("change"),$("#modal-add .ms-elem-selectable").removeClass("ms-hover"),$('#modal-add :input[name="price-rate"]').empty()}),$(".lenght-option").on("click",function(){var a=$(this).attr("data");$(this).parent().parent().prev("a").text(a);var e=$("select[name=table_length]");e.val(a),e.change()});var v=$("#modal-add .table-pax-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[2,"asc"]],lengthMenu:[[-1],["All"]]}),f=$("#modal-add .table-board-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[1,"asc"]],lengthMenu:[[-1],["All"]]}),b=$("#modal-add .table-room-type").dataTable({sDom:"tip",lengthMenu:[[-1],["All"]],order:[[1,"asc"]],autoWidth:!1,columnDefs:[{visible:!1,targets:[0]},{targets:[1],width:"35%"},{orderable:!1,targets:[2]},{orderable:!1,targets:[3]},{orderable:!1,targets:[4]},{orderable:!1,targets:[5]},{orderable:!1,targets:[6]},{orderable:!1,targets:[7]},{orderable:!1,targets:[8]},{orderable:!1,targets:[9]}],pageLength:10}),y=$("#modal-edit .table-pax-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[2,"asc"]],lengthMenu:[[-1],["All"]]}),w=$("#modal-edit .table-board-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[1,"asc"]],lengthMenu:[[-1],["All"]]}),_=$("#modal-edit .table-room-type").dataTable({sDom:"tip",lengthMenu:[[-1],["All"]],order:[[1,"asc"]],autoWidth:!1,columnDefs:[{visible:!1,targets:[0]},{targets:[1],width:"35%"},{orderable:!1,targets:[2]},{orderable:!1,targets:[3]},{orderable:!1,targets:[4]},{orderable:!1,targets:[5]},{orderable:!1,targets:[6]},{orderable:!1,targets:[7]},{orderable:!1,targets:[8]},{orderable:!1,targets:[9]}],pageLength:10}),x=$("#modal-info .table-pax-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[2,"asc"]],lengthMenu:[[-1],["All"]]}),k=$("#modal-info .table-board-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[1,"asc"]],lengthMenu:[[-1],["All"]]}),D=$("#modal-info .table-room-type").dataTable({sDom:"tip",lengthMenu:[[-1],["All"]],order:[[1,"asc"]],autoWidth:!1,columnDefs:[{visible:!1,targets:[0]},{targets:[1],width:"35%"},{orderable:!1,targets:[2]},{orderable:!1,targets:[3]},{orderable:!1,targets:[4]},{orderable:!1,targets:[5]},{orderable:!1,targets:[6]},{orderable:!1,targets:[7]},{orderable:!1,targets:[8]},{orderable:!1,targets:[9]}],pageLength:10});function a(a){return a.loading?a.text:"<div class=''><div class=''>"+a.name+"</div></div>"}function e(a){return a.name}$(".hotel-category").barrating({theme:"fontawesome-stars",readonly:!0}),$("#modal-add :input[name=client]").select2({width:"off",ajax:{url:routeClient,type:"POST",dataType:"json",delay:250,data:function(a){return{q:a.term,page:a.page}},processResults:function(a,e){return{results:a}},complete:function(a,e){"419"==a.status&&location.reload(!0)},cache:!0},escapeMarkup:function(a){return a},minimumInputLength:3,templateResult:a,templateSelection:e}),$("#modal-add :input[name=contract]").select2({width:"off",ajax:{url:routeProvider,type:"POST",dataType:"json",delay:250,data:function(a){return{q:a.term,page:a.page}},processResults:function(a,e){return{results:a}},complete:function(a,e){"419"==a.status&&location.reload(!0)},cache:!0},escapeMarkup:function(a){return a},minimumInputLength:3,templateResult:a,templateSelection:e}),$("#modal-add :input[name=contract]").on("select2:select select2:unselect",function(a){var e=a.params.data,t=e.hotel,n=e.pax_types,o=e.board_types,i=e.room_types,l=e.price_rates,r=null!=t.country?t.country.name:"",d=null!=t.state?t.state.name:"",s=null!=t.city?t.city.name:"",c=null!=t.hotel_chain?t.hotel_chain.name:"";if(e.selected){$("#modal-add :input[name=valid-from]").val(moment(e.valid_from,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-add :input[name=valid-to]").val(moment(e.valid_to,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-add .show-hotel :input[name=hotel]").val(t.name),$("#modal-add .show-hotel :input[name=country-text]").val(r),$("#modal-add .show-hotel :input[name=state-text]").val(d),$("#modal-add .show-hotel :input[name=city-text]").val(s),$("#modal-add .show-hotel :input[name=postal-code]").val(t.postal_code),$("#modal-add .show-hotel :input[name=address]").val(t.address),$("#modal-add .show-hotel :input[name=category]").barrating("readonly",!0);var m=null!=t.category?t.category:"";$("#modal-add .show-hotel :input[name=category]").barrating("set",m),$("#modal-add .show-hotel :input[name=hotel-chain]").val(c),$("#modal-add .show-hotel :input[name=admin-phone]").val(t.admin_phone),$("#modal-add .show-hotel :input[name=admin-fax]").val(t.admin_fax),$("#modal-add .show-hotel :input[name=web-site]").val(t.web_site),$("#modal-add .show-hotel :input[name=turistic-licence]").val(t.turistic_licence),$("#modal-add .show-hotel :input[name=email]").val(t.email),$('#modal-add :input[name="price-rate"]').empty();for(var p=0;p<l.length;p++){var u="";"1"==l[p].type?u="(+ "+l[p].value+"%)":"2"==l[p].type&&(u="(+ $"+l[p].value+")");var h='<option value="'+l[p].id+'">'+l[p].market.name+" "+u+"</option>";$('#modal-add :input[name="price-rate"]').append(h)}v.api().clear();for(p=0;p<n.length;p++)v.api().row.add([n[p].id,n[p].code+": "+n[p].name,n[p].agefrom,n[p].ageto]).draw(!1);v.api().columns.adjust().draw(),f.api().clear();for(p=0;p<o.length;p++)f.api().row.add([o[p].id,o[p].code+": "+o[p].name]).draw(!1);f.api().columns.adjust().draw(),b.api().clear();for(p=0;p<i.length;p++)b.api().row.add([i[p].id,i[p].code+": "+i[p].name,i[p].max_pax,i[p].min_pax,i[p].max_adult,i[p].min_adult,i[p].max_children,i[p].min_children,i[p].max_infant,i[p].min_infant]).draw(!1);b.api().columns.adjust().draw()}}),$("#modal-edit :input[name=client]").select2({width:"off",ajax:{url:routeClient,type:"POST",dataType:"json",delay:250,data:function(a){return{q:a.term,page:a.page}},processResults:function(a,e){return{results:a}},complete:function(a,e){"419"==a.status&&location.reload(!0)},cache:!0},escapeMarkup:function(a){return a},minimumInputLength:3,templateResult:a,templateSelection:e}),$("#modal-edit :input[name=client]").on("select2:select select2:unselect",function(a){var e=a.params.data;e.selected&&$("#modal-edit :input[name=client-id]").val(e.id)}),$("#modal-edit :input[name=contract]").select2({width:"off",ajax:{url:routeProvider,type:"POST",dataType:"json",delay:250,data:function(a){return{q:a.term,page:a.page}},processResults:function(a,e){return{results:a}},complete:function(a,e){"419"==a.status&&location.reload(!0)},cache:!0},escapeMarkup:function(a){return a},minimumInputLength:3,templateResult:a,templateSelection:e}),$("#modal-edit :input[name=contract]").on("select2:select select2:unselect",function(a){var e=a.params.data,t=e.hotel,n=e.pax_types,o=e.board_types,i=e.room_types,l=e.price_rates,r=null!=t.country?t.country.name:"",d=null!=t.state?t.state.name:"",s=null!=t.city?t.city.name:"",c=null!=t.hotel_chain?t.hotel_chain.name:"";if(e.selected){$("#modal-edit :input[name=hotel-contract-id]").val(e.id),$('#modal-edit :input[name="valid-from"]').val(e.valid_from),$('#modal-edit :input[name="valid-to"]').val(e.valid_to),$("#modal-edit .show-hotel :input[name=hotel]").val(t.name),$("#modal-edit .show-hotel :input[name=country-text]").val(r),$("#modal-edit .show-hotel :input[name=state-text]").val(d),$("#modal-edit .show-hotel :input[name=city-text]").val(s),$("#modal-edit .show-hotel :input[name=postal-code]").val(t.postal_code),$("#modal-edit .show-hotel :input[name=address]").val(t.address),$("#modal-edit .show-hotel :input[name=category]").barrating("readonly",!0);var m=null!=t.category?t.category:"";$("#modal-edit .show-hotel :input[name=category]").barrating("set",m),$("#modal-edit .show-hotel :input[name=hotel-chain]").val(c),$("#modal-edit .show-hotel :input[name=admin-phone]").val(t.admin_phone),$("#modal-edit .show-hotel :input[name=admin-fax]").val(t.admin_fax),$("#modal-edit .show-hotel :input[name=web-site]").val(t.web_site),$("#modal-edit .show-hotel :input[name=turistic-licence]").val(t.turistic_licence),$("#modal-edit .show-hotel :input[name=email]").val(t.email),$('#modal-edit :input[name="price-rate"]').empty();for(var p=0;p<l.length;p++){var u="";"1"==l[p].type?u="(+ "+l[p].value+"%)":"2"==l[p].type&&(u="(+ $"+l[p].value+")");var h='<option value="'+l[p].id+'">'+l[p].market.name+" "+u+"</option>";$('#modal-edit :input[name="price-rate"]').append(h)}y.api().clear();for(p=0;p<n.length;p++)y.api().row.add([n[p].id,n[p].code+": "+n[p].name,n[p].agefrom,n[p].ageto]).draw(!1);y.api().columns.adjust().draw(),w.api().clear();for(p=0;p<o.length;p++)w.api().row.add([o[p].id,o[p].code+": "+o[p].name]).draw(!1);w.api().columns.adjust().draw(),_.api().clear();for(p=0;p<i.length;p++)_.api().row.add([i[p].id,i[p].code+": "+i[p].name,i[p].max_pax,i[p].min_pax,i[p].max_adult,i[p].min_adult,i[p].max_children,i[p].min_children,i[p].max_infant,i[p].min_infant]).draw(!1);_.api().columns.adjust().draw()}});var d=$("#form-add");d.validate({errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:!1,ignore:"",rules:{name:{required:!0},contract:{required:!0},client:{required:!0},"price-rate":{required:!0}},errorPlacement:function(a,e){0<e.parents(".mt-radio-list").size()||0<e.parents(".mt-checkbox-list").size()?(0<e.parents(".mt-radio-list").size()&&a.appendTo(e.parents(".mt-radio-list")[0]),0<e.parents(".mt-checkbox-list").size()&&a.appendTo(e.parents(".mt-checkbox-list")[0])):0<e.parents(".mt-radio-inline").size()||0<e.parents(".mt-checkbox-inline").size()?(0<e.parents(".mt-radio-inline").size()&&a.appendTo(e.parents(".mt-radio-inline")[0]),0<e.parents(".mt-checkbox-inline").size()&&a.appendTo(e.parents(".mt-checkbox-inline")[0])):0<e.parent(".input-group").size()?a.insertAfter(e.parent(".input-group")):e.attr("data-error-container")?a.appendTo(e.attr("data-error-container")):e.hasClass("ajax-select")?a.insertAfter(e.next()):a.insertAfter(e)},invalidHandler:function(a,e){toastr.error("Please check the entry fields.","Error")},highlight:function(a){$(a).closest(".form-group").addClass("has-error")},unhighlight:function(a){$(a).closest(".form-group").removeClass("has-error")},success:function(a){a.closest(".form-group").removeClass("has-error")},submitHandler:function(n){var o=$(n).find("button[type=submit]:focus").attr("data"),a=$('#modal-add :input[name="price-rate"]').val(),e=$('#modal-add :input[name="name"]').val(),t=$('#modal-add :input[name="contract"]').val(),i=$('#modal-add :input[name="client"]').val(),l=$('#modal-add :input[name="active"]').prop("checked")?"1":"0";$.ajax({url:routeCreate,type:"POST",data:{"price-rate":a,name:e,contract:t,client:i,active:l},beforeSend:function(){App.showMask(!0,d)},complete:function(a,e){if(App.showMask(!1,d),"419"==a.status)location.reload(!0);else if("200"!=a.status)toastr.error("Please check your connection and try again.","Error on loading the content");else{var t=$.parseJSON(a.responseText);"success"==t.status?(toastr.success(t.message,"Success"),r=!0,"accept"==o&&$(n).find("button.cancel-form").click(),d.validate().resetForm(),d[0].reset(),$("#modal-add :input[name=category]").barrating("set",""),v.api().clear().draw(),b.api().clear().draw(),f.api().clear().draw(),$("#modal-add .select-client").val(null).trigger("change"),$("#modal-add .select-contract").val(null).trigger("change"),$("#modal-add .ms-elem-selectable").removeClass("ms-hover"),$('#modal-add :input[name="price-rate"]').empty()):toastr.error(t.message,"Error")}}})}});var Y=$("#form-edit");Y.validate({errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:!1,ignore:"",rules:{name:{required:!0},"price-rate":{required:!0}},errorPlacement:function(a,e){0<e.parents(".mt-radio-list").size()||0<e.parents(".mt-checkbox-list").size()?(0<e.parents(".mt-radio-list").size()&&a.appendTo(e.parents(".mt-radio-list")[0]),0<e.parents(".mt-checkbox-list").size()&&a.appendTo(e.parents(".mt-checkbox-list")[0])):0<e.parents(".mt-radio-inline").size()||0<e.parents(".mt-checkbox-inline").size()?(0<e.parents(".mt-radio-inline").size()&&a.appendTo(e.parents(".mt-radio-inline")[0]),0<e.parents(".mt-checkbox-inline").size()&&a.appendTo(e.parents(".mt-checkbox-inline")[0])):0<e.parent(".input-group").size()?a.insertAfter(e.parent(".input-group")):e.attr("data-error-container")?a.appendTo(e.attr("data-error-container")):e.hasClass("ajax-select")?a.insertAfter(e.next()):a.insertAfter(e)},invalidHandler:function(a,e){toastr.error("Please check the entry fields.","Error")},highlight:function(a){$(a).closest(".form-group").addClass("has-error")},unhighlight:function(a){$(a).closest(".form-group").removeClass("has-error")},success:function(a){a.closest(".form-group").removeClass("has-error")},submitHandler:function(n){var a=$('#modal-edit :input[name="id"]').val(),e=$('#modal-edit :input[name="price-rate"]').val(),t=$('#modal-edit :input[name="name"]').val(),o=$('#modal-edit :input[name="hotel-contract-id"]').val(),i=$('#modal-edit :input[name="client-id"]').val(),l=$('#modal-edit :input[name="active"]').prop("checked")?"1":"0";$.ajax({url:routeUpdate,type:"POST",data:{id:a,"price-rate":e,name:t,"hotel-contract-id":o,"client-id":i,active:l},beforeSend:function(){App.showMask(!0,Y)},complete:function(a,e){if(App.showMask(!1,Y),"419"==a.status)location.reload(!0);else if("200"!=a.status)toastr.error("Please check your connection and try again.","Error on loading the content");else{var t=$.parseJSON(a.responseText);"success"==t.status?(toastr.success(t.message,"Success"),r=!0,$(n).find("button.cancel-form").click()):toastr.error(t.message,"Error")}}})}});var n=!1;$("#table tbody").on("click",".dt-delete",function(a){if(!n){var e=g.row($(this).parents("tr")).data();$(this).confirmation("show"),$(this).on("confirmed.bs.confirmation",function(){n=!0,$.ajax({url:routeDelete,type:"POST",data:{id:e.id},beforeSend:function(){App.showMask(!0,$("#table"))},complete:function(a,e){if(n=!1,App.showMask(!1,$("#table")),"419"==a.status)location.reload(!0);else if("200"!=a.status)toastr.error("Please check your connection and try again.","Error on loading the content");else{var t=$.parseJSON(a.responseText);"success"==t.status?(toastr.success(t.message,"Success"),g.draw()):toastr.error(t.message,"Error")}}})})}a.preventDefault()}),$("#table tbody").on("click",".dt-view",function(a){var e=g.row($(this).parents("tr")).data(),t=e.object,n=t.hotel_contract,o=t.client,i=t.price_rate,l=n.hotel,r=n.pax_types,d=n.board_types,s=n.room_types,c=null!=l.country?l.country.name:"",m=null!=l.state?l.state.name:"",p=null!=l.city?l.city.name:"",u=null!=l.hotel_chain?l.hotel_chain.name:"",h=i.market.name,v="";"1"==i.type?v=" (+ "+i.value+"%)":"2"==i.type&&(v=" (+ $"+i.value+")"),h+=v,$("#modal-info .contract-details").each(function(){$(this).hasClass("hidden")||$(this).addClass("hidden")}),$("#modal-info :input[name=name]").val(t.name),$("#modal-info :input[name=contract]").val(n.name),$("#modal-info :input[name=price-rate]").val(h),$("#modal-info :input[name=client]").val(o.name),$("#modal-info :input[name=valid-from]").val(moment(n.valid_from,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-info :input[name=valid-to]").val(moment(n.valid_to,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-info :input[name=hotel]").val(l.name),$("#modal-info :input[name=country-text]").val(c),$("#modal-info :input[name=state-text]").val(m),$("#modal-info :input[name=city-text]").val(p),$("#modal-info :input[name=postal-code]").val(l.postal_code),$("#modal-info :input[name=address]").val(l.address),$("#modal-info :input[name=category]").barrating("set",l.category),$("#modal-info :input[name=hotel-chain]").val(u),$("#modal-info :input[name=admin-phone]").val(l.admin_phone),$("#modal-info :input[name=admin-fax]").val(l.admin_fax),$("#modal-info :input[name=web-site]").val(l.web_site),$("#modal-info :input[name=turistic-licence]").val(l.turistic_licence),$("#modal-info :input[name=email]").val(l.email),1==e.active?($("#modal-info :input[name=active]").prop("checked","checked"),$("#modal-info :input[name=active]").val(1)):($("#modal-info :input[name=active]").prop("checked",""),$("#modal-info :input[name=active]").val(0)),x.api().clear();for(var f=0;f<r.length;f++)x.api().row.add([r[f].id,r[f].code+": "+r[f].name,r[f].agefrom,r[f].ageto]).draw(!1);x.api().columns.adjust().draw(),k.api().clear();for(f=0;f<d.length;f++)k.api().row.add([d[f].id,d[f].code+": "+d[f].name]).draw(!1);k.api().columns.adjust().draw(),D.api().clear();for(f=0;f<s.length;f++)D.api().row.add([s[f].id,s[f].code+": "+s[f].name,s[f].max_pax,s[f].min_pax,s[f].max_adult,s[f].min_adult,s[f].max_children,s[f].min_children,s[f].max_infant,s[f].min_infant]).draw(!1);D.api().columns.adjust().draw(),a.preventDefault()}),$("#table tbody").on("click",".dt-edit",function(a){Y.validate().resetForm(),Y[0].reset();var e=g.row($(this).parents("tr")).data();e.object;var t=e.object,n=t.hotel_contract,o=t.client,i=n.price_rates,l=t.price_rate,r=n.hotel,d=n.pax_types,s=n.board_types,c=n.room_types,m=null!=r.country?r.country.name:"",p=null!=r.state?r.state.name:"",u=null!=r.city?r.city.name:"",h=null!=r.hotel_chain?r.hotel_chain.name:"";$("#modal-edit .contract-details").each(function(){$(this).hasClass("hidden")||$(this).addClass("hidden")}),$('#modal-edit :input[name="price-rate"]').empty();for(var v=0;v<i.length;v++){var f="";"1"==i[v].type?f="(+ "+i[v].value+"%)":"2"==i[v].type&&(f="(+ $"+i[v].value+")");var b='<option value="'+i[v].id+'">'+i[v].market.name+" "+f+"</option>";$('#modal-edit :input[name="price-rate"]').append(b)}$('#modal-edit :input[name="price-rate"]').val(l.id),$("#modal-edit :input[name=id]").val(t.id),$("#modal-edit :input[name=name]").val(t.name),$("#modal-edit :input[name=hotel-contract-id]").val(n.id),$("#modal-edit :input[name=contract]").parent().find(".select2-selection__rendered").html(n.name+'<span class="select2-selection__placeholder"></span>'),$("#modal-edit :input[name=client-id]").val(o.id),$("#modal-edit :input[name=client]").parent().find(".select2-selection__rendered").html(o.name+'<span class="select2-selection__placeholder"></span>'),$("#modal-edit :input[name=valid-from]").val(moment(n.valid_from,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-edit :input[name=valid-to]").val(moment(n.valid_to,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-edit :input[name=hotel]").val(r.name),$("#modal-edit :input[name=country-text]").val(m),$("#modal-edit :input[name=state-text]").val(p),$("#modal-edit :input[name=city-text]").val(u),$("#modal-edit :input[name=postal-code]").val(r.postal_code),$("#modal-edit :input[name=address]").val(r.address),$("#modal-edit :input[name=category]").barrating("set",r.category),$("#modal-edit :input[name=hotel-chain]").val(h),$("#modal-edit :input[name=admin-phone]").val(r.admin_phone),$("#modal-edit :input[name=admin-fax]").val(r.admin_fax),$("#modal-edit :input[name=web-site]").val(r.web_site),$("#modal-edit :input[name=turistic-licence]").val(r.turistic_licence),$("#modal-edit :input[name=email]").val(r.email),1==e.active?($("#modal-edit :input[name=active]").prop("checked","checked"),$("#modal-edit :input[name=active]").val(1)):($("#modal-edit :input[name=active]").prop("checked",""),$("#modal-edit :input[name=active]").val(0)),y.api().clear();for(v=0;v<d.length;v++)y.api().row.add([d[v].id,d[v].code+": "+d[v].name,d[v].agefrom,d[v].ageto]).draw(!1);y.api().columns.adjust().draw(),w.api().clear();for(v=0;v<s.length;v++)w.api().row.add([s[v].id,s[v].code+": "+s[v].name]).draw(!1);w.api().columns.adjust().draw(),_.api().clear();for(v=0;v<c.length;v++)_.api().row.add([c[v].id,c[v].code+": "+c[v].name,c[v].max_pax,c[v].min_pax,c[v].max_adult,c[v].min_adult,c[v].max_children,c[v].min_children,c[v].max_infant,c[v].min_infant]).draw(!1);_.api().columns.adjust().draw(),a.preventDefault()}),$(".cancel-form").on("click",function(a){r&&(g.draw(),r=!1)}),$(".btn-search-reset").on("click",function(a){a.preventDefault(),$("#search-section :input[name=name]").val(""),$("#search-section :input[name=location]").val(""),$("#search-section :input[name=client]").val(""),$("#search-section :input[name=active]").val(""),$("#search-section :input[name=valid-from]").val(""),$("#search-section :input[name=valid-to]").val("")}),$(".btn-search-cancel").on("click",function(a){a.preventDefault(),$("#search-section").slideToggle()}),$("#search-section :input[name=valid-from]").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0,format:"dd.mm.yyyy",orientation:"bottom"}),$("#search-section :input[name=valid-to]").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0,format:"dd.mm.yyyy",orientation:"bottom"}),$(".btn-search-submit").on("click",function(a){a.preventDefault(),g.columns("name:name").search($("#search-section :input[name=name]").val()).columns("location:name").search($("#search-section :input[name=location]").val()).columns("client:name").search($("#search-section :input[name=client]").val()).columns("valid_from:name").search($("#search-section :input[name=valid-from]").val()).columns("valid_to:name").search($("#search-section :input[name=valid-to]").val()).columns("active:name").search($("#search-section :input[name=active]").val()).draw()}),$(".excel").on("click",function(){var a={name:$("#search-section :input[name=name]").val(),location:$("#search-section :input[name=location]").val(),client:$("#search-section :input[name=client]").val(),validFrom:$("#search-section :input[name=valid-from]").val(),validTo:$("#search-section :input[name=valid-to]").val(),active:$("#search-section :input[name=active]").val()},e=routeExcel+"?"+$.param(a);window.location=e})});