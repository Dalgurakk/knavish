$(document).ready(function(){var d=!1;$.fn.dataTable.ext.errMode="none";var b=$("#table").on("error.dt",function(e,a,t,n){}).on("processing.dt",function(e,a,t){App.showMask(t,$(this)),App.reloadToolTips()}).on("init.dt",function(){}).DataTable({processing:!0,serverSide:!0,sDom:"ltip",iDisplayLength:10,ajax:{url:routeRead,type:"POST",complete:function(e,a){"200"!=e.status&&toastr.error("Please check your connection and try again.","Error on loading the content"),$(".br-readonly").on("click",function(e){e.preventDefault()})}},order:[[1,"asc"]],columns:[{data:"id",name:"id",visible:!1},{data:"name",name:"name"},{data:"client",name:"client"},{data:"valid_from",name:"valid_from"},{data:"valid_to",name:"valid_to"},{data:"status",name:"status",orderable:!1,data:function(e,a,t,n){var o="";return"3"==e.status?o='<span class="label label-sm label-danger"> Finished </span>':"2"==e.status?o='<span class="label label-sm label-success"> In Progress </span>':"1"==e.status&&(o='<span class="label label-sm label-warning"> Pending </span>'),o}},{data:"active",name:"active",className:"dt-center",data:function(e,a,t,n){var o='<span><i class="fa fa-close dt-active dt-active-0"></i></span>';return 1==e.active&&(o='<span><i class="fa fa-check dt-active dt-active-1"></i></span>'),o}},{targets:"actions",orderable:!1,name:"actions",className:"dt-center",data:function(e,a,t,n){return'<form method="get" action="'+routeSetting+'"><input type="hidden" name="id" value="'+e.id+'"><div class="dt-actions"><a class="btn btn-default btn-circle btn-icon-only btn-action dt-view" data-toggle="modal" href="#modal-info"><i class="glyphicon glyphicon-eye-open btn-action-icon"></i></a><a class="btn btn-default btn-circle btn-icon-only btn-action dt-edit" data-toggle="modal" href="#modal-edit"><i class="icon-pencil btn-action-icon"></i></a><a class="btn btn-default btn-circle btn-icon-only btn-action dt-delete" href="javascript:;" data-popout="true" data-placement="left"data-btn-ok-label="Yes" data-btn-ok-class="btn-sm btn-success"  data-btn-ok-icon-content="check" data-btn-cancel-label="No" data-btn-cancel-class="btn-sm btn-danger" data-btn-cancel-icon-content="close" data-title="Are you sure?" data-content=""><i class="icon-trash btn-action-icon"></i></a><button type="submit" class="btn btn-default btn-circle btn-icon-only btn-action dt-setting"><i class="icon-settings btn-action-icon"></i></button></div></form>'}}]});$("#table_length").hide(),$(".search").on("click",function(e){$("#search-section").slideToggle()}),$(".reload").on("click",function(e){b.draw()}),$(".add").on("click",function(){s.validate().resetForm(),s[0].reset(),$("#modal-add :input[name=category]").barrating("set",""),m.api().clear().draw(),u.api().clear().draw(),p.api().clear().draw(),$("#modal-add .select-client").val(null).trigger("change"),$("#modal-add .select-contract").val(null).trigger("change"),$("#modal-add .ms-elem-selectable").removeClass("ms-hover"),$('#modal-add :input[name="price-rate"]').empty()}),$(".lenght-option").on("click",function(){var e=$(this).attr("data");$(this).parent().parent().prev("a").text(e);var a=$("select[name=table_length]");a.val(e),a.change()});var m=$("#modal-add .table-pax-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[2,"asc"]],lengthMenu:[[-1],["All"]]}),p=$("#modal-add .table-board-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[1,"asc"]],lengthMenu:[[-1],["All"]]}),u=$("#modal-add .table-room-type").dataTable({sDom:"t",lengthMenu:[[-1],["All"]],order:[[1,"asc"]],autoWidth:!1,columnDefs:[{visible:!1,targets:[0]},{targets:[1],width:"35%"},{orderable:!1,targets:[2]},{orderable:!1,targets:[3]},{orderable:!1,targets:[4]},{orderable:!1,targets:[5]},{orderable:!1,targets:[6]}],language:{emptyTable:"No room type selected"}}),y=$("#modal-edit .table-pax-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[2,"asc"]],lengthMenu:[[-1],["All"]]}),w=$("#modal-edit .table-board-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[1,"asc"]],lengthMenu:[[-1],["All"]]}),x=$("#modal-edit .table-room-type").dataTable({sDom:"t",lengthMenu:[[-1],["All"]],order:[[1,"asc"]],autoWidth:!1,columnDefs:[{visible:!1,targets:[0]},{targets:[1],width:"35%"},{orderable:!1,targets:[2]},{orderable:!1,targets:[3]},{orderable:!1,targets:[4]},{orderable:!1,targets:[5]},{orderable:!1,targets:[6]}],language:{emptyTable:"No room type selected"}}),g=$("#modal-info .table-pax-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[2,"asc"]],lengthMenu:[[-1],["All"]]}),_=$("#modal-info .table-board-type").dataTable({sDom:"t",columnDefs:[{visible:!1,targets:[0]}],order:[[1,"asc"]],lengthMenu:[[-1],["All"]]}),k=$("#modal-info .table-room-type").dataTable({sDom:"t",lengthMenu:[[-1],["All"]],order:[[1,"asc"]],autoWidth:!1,columnDefs:[{visible:!1,targets:[0]},{targets:[1],width:"35%"},{orderable:!1,targets:[2]},{orderable:!1,targets:[3]},{orderable:!1,targets:[4]},{orderable:!1,targets:[5]},{orderable:!1,targets:[6]}],language:{emptyTable:"No room type selected"}});function e(e){return e.loading?e.text:"<div class=''><div class=''>"+e.name+"</div></div>"}function a(e){return e.name}$(".hotel-category").barrating({theme:"fontawesome-stars",readonly:!0}),$("#modal-add :input[name=client]").select2({width:"off",ajax:{url:routeClient,type:"POST",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,a){return{results:e}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:3,templateResult:e,templateSelection:a}),$("#modal-add :input[name=contract]").select2({width:"off",ajax:{url:routeProvider,type:"POST",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,a){return{results:e}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:3,templateResult:e,templateSelection:a}),$("#modal-add :input[name=contract]").on("select2:select select2:unselect",function(e){var a=e.params.data,t=a.hotel,n=a.pax_types,o=a.board_types,i=a.room_types,l=a.price_rates;if(a.selected){$("#modal-add :input[name=valid-from]").val(moment(a.valid_from,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-add :input[name=valid-to]").val(moment(a.valid_to,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-add .show-hotel :input[name=hotel]").val(t.name),$("#modal-add .show-hotel :input[name=country-text]").val(t.country.name),$("#modal-add .show-hotel :input[name=state-text]").val(t.state.name),$("#modal-add .show-hotel :input[name=city-text]").val(t.city.name),$("#modal-add .show-hotel :input[name=postal-code]").val(t.postal_code),$("#modal-add .show-hotel :input[name=address]").val(t.address),$("#modal-add .show-hotel :input[name=category]").barrating("readonly",!0);var r=null!=t.category?t.category:"";$("#modal-add .show-hotel :input[name=category]").barrating("set",r),$("#modal-add .show-hotel :input[name=hotel-chain]").val(t.hotel_chain.name),$("#modal-add .show-hotel :input[name=admin-phone]").val(t.admin_phone),$("#modal-add .show-hotel :input[name=admin-fax]").val(t.admin_fax),$("#modal-add .show-hotel :input[name=web-site]").val(t.web_site),$("#modal-add .show-hotel :input[name=turistic-licence]").val(t.turistic_licence),$("#modal-add .show-hotel :input[name=email]").val(t.email),$('#modal-add :input[name="price-rate"]').empty();for(var d=0;d<l.length;d++){var s="";"1"==l[d].type?s="(+ "+l[d].value+"%)":"2"==l[d].type&&(s="(+ $"+l[d].value+")");var c='<option value="'+l[d].id+'">'+l[d].market.name+" "+s+"</option>";$('#modal-add :input[name="price-rate"]').append(c)}m.api().clear();for(d=0;d<n.length;d++)m.api().row.add([n[d].id,n[d].code+": "+n[d].name,n[d].agefrom,n[d].ageto]).draw(!1);m.api().columns.adjust().draw(),p.api().clear();for(d=0;d<o.length;d++)p.api().row.add([o[d].id,o[d].code+": "+o[d].name]).draw(!1);p.api().columns.adjust().draw(),u.api().clear();for(d=0;d<i.length;d++)u.api().row.add([i[d].id,i[d].code+": "+i[d].name,i[d].maxpax,i[d].minpax,i[d].minadult,i[d].minchildren,i[d].minchildren]).draw(!1);u.api().columns.adjust().draw()}}),$("#modal-edit :input[name=client]").select2({width:"off",ajax:{url:routeClient,type:"POST",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,a){return{results:e}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:3,templateResult:e,templateSelection:a}),$("#modal-edit :input[name=client]").on("select2:select select2:unselect",function(e){var a=e.params.data;a.selected&&$("#modal-edit :input[name=client-id]").val(a.id)}),$("#modal-edit :input[name=contract]").select2({width:"off",ajax:{url:routeProvider,type:"POST",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,a){return{results:e}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:3,templateResult:e,templateSelection:a}),$("#modal-edit :input[name=contract]").on("select2:select select2:unselect",function(e){var a=e.params.data,t=a.hotel,n=a.pax_types,o=a.board_types,i=a.room_types,l=a.price_rates;if(a.selected){$("#modal-edit :input[name=hotel-contract-id]").val(a.id),$('#modal-edit :input[name="valid-from"]').val(a.valid_from),$('#modal-edit :input[name="valid-to"]').val(a.valid_to),$("#modal-edit .show-hotel :input[name=hotel]").val(t.name),$("#modal-edit .show-hotel :input[name=country-text]").val(t.country.name),$("#modal-edit .show-hotel :input[name=state-text]").val(t.state.name),$("#modal-edit .show-hotel :input[name=city-text]").val(t.city.name),$("#modal-edit .show-hotel :input[name=postal-code]").val(t.postal_code),$("#modal-edit .show-hotel :input[name=address]").val(t.address),$("#modal-edit .show-hotel :input[name=category]").barrating("readonly",!0);var r=null!=t.category?t.category:"";$("#modal-edit .show-hotel :input[name=category]").barrating("set",r),$("#modal-edit .show-hotel :input[name=hotel-chain]").val(t.hotel_chain.name),$("#modal-edit .show-hotel :input[name=admin-phone]").val(t.admin_phone),$("#modal-edit .show-hotel :input[name=admin-fax]").val(t.admin_fax),$("#modal-edit .show-hotel :input[name=web-site]").val(t.web_site),$("#modal-edit .show-hotel :input[name=turistic-licence]").val(t.turistic_licence),$("#modal-edit .show-hotel :input[name=email]").val(t.email),$('#modal-edit :input[name="price-rate"]').empty();for(var d=0;d<l.length;d++){var s="";"1"==l[d].type?s="(+ "+l[d].value+"%)":"2"==l[d].type&&(s="(+ $"+l[d].value+")");var c='<option value="'+l[d].id+'">'+l[d].market.name+" "+s+"</option>";$('#modal-edit :input[name="price-rate"]').append(c)}y.api().clear();for(d=0;d<n.length;d++)y.api().row.add([n[d].id,n[d].code+": "+n[d].name,n[d].agefrom,n[d].ageto]).draw(!1);y.api().columns.adjust().draw(),w.api().clear();for(d=0;d<o.length;d++)w.api().row.add([o[d].id,o[d].code+": "+o[d].name]).draw(!1);w.api().columns.adjust().draw(),x.api().clear();for(d=0;d<i.length;d++)x.api().row.add([i[d].id,i[d].code+": "+i[d].name,i[d].maxpax,i[d].minpax,i[d].minadult,i[d].minchildren,i[d].minchildren]).draw(!1);x.api().columns.adjust().draw()}});var s=$("#form-add");s.validate({errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:!1,ignore:"",rules:{name:{required:!0},contract:{required:!0},client:{required:!0},"price-rate":{required:!0}},errorPlacement:function(e,a){0<a.parents(".mt-radio-list").size()||0<a.parents(".mt-checkbox-list").size()?(0<a.parents(".mt-radio-list").size()&&e.appendTo(a.parents(".mt-radio-list")[0]),0<a.parents(".mt-checkbox-list").size()&&e.appendTo(a.parents(".mt-checkbox-list")[0])):0<a.parents(".mt-radio-inline").size()||0<a.parents(".mt-checkbox-inline").size()?(0<a.parents(".mt-radio-inline").size()&&e.appendTo(a.parents(".mt-radio-inline")[0]),0<a.parents(".mt-checkbox-inline").size()&&e.appendTo(a.parents(".mt-checkbox-inline")[0])):0<a.parent(".input-group").size()?e.insertAfter(a.parent(".input-group")):a.attr("data-error-container")?e.appendTo(a.attr("data-error-container")):a.hasClass("ajax-select")?e.insertAfter(a.next()):e.insertAfter(a)},invalidHandler:function(e,a){toastr.error("Please check the entry fields.","Error")},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error")},submitHandler:function(n){var o=$(n).find("button[type=submit]:focus").attr("data"),e=$('#modal-add :input[name="price-rate"]').val(),a=$('#modal-add :input[name="name"]').val(),t=$('#modal-add :input[name="contract"]').val(),i=$('#modal-add :input[name="client"]').val(),l=$('#modal-add :input[name="active"]').prop("checked")?"1":"0";$.ajax({url:routeCreate,type:"POST",data:{"price-rate":e,name:a,contract:t,client:i,active:l},beforeSend:function(){App.showMask(!0,s)},complete:function(e,a){if(App.showMask(!1,s),"200"!=e.status)toastr.error("Please check your connection and try again.","Error on loading the content");else{var t=$.parseJSON(e.responseText);"success"==t.status?(toastr.success(t.message,"Success"),d=!0,"accept"==o&&$(n).find("button.cancel-form").click(),s.validate().resetForm(),s[0].reset(),$("#modal-add :input[name=category]").barrating("set",""),m.api().clear().draw(),u.api().clear().draw(),p.api().clear().draw(),$("#modal-add .select-client").val(null).trigger("change"),$("#modal-add .select-contract").val(null).trigger("change"),$("#modal-add .ms-elem-selectable").removeClass("ms-hover"),$('#modal-add :input[name="price-rate"]').empty()):toastr.error(t.message,"Error")}}})}});var D=$("#form-edit");D.validate({errorElement:"span",errorClass:"help-block help-block-error",focusInvalid:!1,ignore:"",rules:{name:{required:!0},"price-rate":{required:!0}},errorPlacement:function(e,a){0<a.parents(".mt-radio-list").size()||0<a.parents(".mt-checkbox-list").size()?(0<a.parents(".mt-radio-list").size()&&e.appendTo(a.parents(".mt-radio-list")[0]),0<a.parents(".mt-checkbox-list").size()&&e.appendTo(a.parents(".mt-checkbox-list")[0])):0<a.parents(".mt-radio-inline").size()||0<a.parents(".mt-checkbox-inline").size()?(0<a.parents(".mt-radio-inline").size()&&e.appendTo(a.parents(".mt-radio-inline")[0]),0<a.parents(".mt-checkbox-inline").size()&&e.appendTo(a.parents(".mt-checkbox-inline")[0])):0<a.parent(".input-group").size()?e.insertAfter(a.parent(".input-group")):a.attr("data-error-container")?e.appendTo(a.attr("data-error-container")):a.hasClass("ajax-select")?e.insertAfter(a.next()):e.insertAfter(a)},invalidHandler:function(e,a){toastr.error("Please check the entry fields.","Error")},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error")},submitHandler:function(n){var o=$(n).find("button[type=submit]:focus").attr("data"),e=$('#modal-edit :input[name="id"]').val(),a=$('#modal-edit :input[name="price-rate"]').val(),t=$('#modal-edit :input[name="name"]').val(),i=$('#modal-edit :input[name="hotel-contract-id"]').val(),l=$('#modal-edit :input[name="client-id"]').val(),r=$('#modal-edit :input[name="active"]').prop("checked")?"1":"0";$.ajax({url:routeUpdate,type:"POST",data:{id:e,"price-rate":a,name:t,"hotel-contract-id":i,"client-id":l,active:r},beforeSend:function(){App.showMask(!0,s)},complete:function(e,a){if(App.showMask(!1,s),"200"!=e.status)toastr.error("Please check your connection and try again.","Error on loading the content");else{var t=$.parseJSON(e.responseText);"success"==t.status?(toastr.success(t.message,"Success"),d=!0,"accept"==o&&$(n).find("button.cancel-form").click()):toastr.error(t.message,"Error")}}})}}),$("#table tbody").on("click",".dt-delete",function(e){var a=b.row($(this).parents("tr")).data();$(this).confirmation("show"),$(this).on("confirmed.bs.confirmation",function(){$.ajax({url:routeDelete,type:"POST",data:{id:a.id},beforeSend:function(){App.showMask(!0,s)},complete:function(e,a){if(App.showMask(!1,s),"200"!=e.status)toastr.error("Please check your connection and try again.","Error on loading the content");else{var t=$.parseJSON(e.responseText);"success"==t.status?(toastr.success(t.message,"Success"),b.draw()):toastr.error(t.message,"Error")}}})}),e.preventDefault()}),$("#table tbody").on("click",".dt-view",function(e){var a=b.row($(this).parents("tr")).data(),t=a.contract,n=t.hotel_contract,o=t.client,i=t.price_rate,l=n.hotel,r=n.pax_types,d=n.board_types,s=n.room_types,c=null!=l.country?l.country.name:"",m=null!=l.state?l.state.name:"",p=null!=l.city?l.city.name:"",u=null!=l.hotel_chain?l.hotel_chain.name:"",h=i.market.name,v="";"1"==i.type?v=" (+ "+i.value+"%)":"2"==i.type&&(v=" (+ $"+i.value+")"),h+=v,$("#modal-info :input[name=name]").val(t.name),$("#modal-info :input[name=contract]").val(n.name),$("#modal-info :input[name=price-rate]").val(h),$("#modal-info :input[name=client]").val(o.name),$("#modal-info :input[name=valid-from]").val(moment(n.valid_from,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-info :input[name=valid-to]").val(moment(n.valid_to,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-info :input[name=hotel]").val(l.name),$("#modal-info :input[name=country-text]").val(c),$("#modal-info :input[name=state-text]").val(m),$("#modal-info :input[name=city-text]").val(p),$("#modal-info :input[name=postal-code]").val(l.postal_code),$("#modal-info :input[name=address]").val(l.address),$("#modal-info :input[name=category]").barrating("set",l.category),$("#modal-info :input[name=hotel-chain]").val(u),$("#modal-info :input[name=admin-phone]").val(l.admin_phone),$("#modal-info :input[name=admin-fax]").val(l.admin_fax),$("#modal-info :input[name=web-site]").val(l.web_site),$("#modal-info :input[name=turistic-licence]").val(l.turistic_licence),$("#modal-info :input[name=email]").val(l.email),1==a.active?($("#modal-info :input[name=active]").prop("checked","checked"),$("#modal-info :input[name=active]").val(1)):($("#modal-info :input[name=active]").prop("checked",""),$("#modal-info :input[name=active]").val(0)),g.api().clear();for(var f=0;f<r.length;f++)g.api().row.add([r[f].id,r[f].code+": "+r[f].name,r[f].agefrom,r[f].ageto]).draw(!1);g.api().columns.adjust().draw(),_.api().clear();for(f=0;f<d.length;f++)_.api().row.add([d[f].id,d[f].code+": "+d[f].name]).draw(!1);_.api().columns.adjust().draw(),k.api().clear();for(f=0;f<s.length;f++)k.api().row.add([s[f].id,s[f].code+": "+s[f].name,s[f].maxpax,s[f].minpax,s[f].minadult,s[f].minchildren,s[f].minchildren]).draw(!1);k.api().columns.adjust().draw(),e.preventDefault()}),$("#table tbody").on("click",".dt-edit",function(e){D.validate().resetForm(),D[0].reset();var a=b.row($(this).parents("tr")).data(),t=a.contract,n=t.hotel_contract,o=t.client,i=n.price_rates,l=t.price_rate,r=n.hotel,d=n.pax_types,s=n.board_types,c=n.room_types,m=null!=r.country?r.country.name:"",p=null!=r.state?r.state.name:"",u=null!=r.city?r.city.name:"",h=null!=r.hotel_chain?r.hotel_chain.name:"";$('#modal-edit :input[name="price-rate"]').empty();for(var v=0;v<i.length;v++){var f="";"1"==i[v].type?f="(+ "+i[v].value+"%)":"2"==i[v].type&&(f="(+ $"+i[v].value+")");var g='<option value="'+i[v].id+'">'+i[v].market.name+" "+f+"</option>";$('#modal-edit :input[name="price-rate"]').append(g)}$('#modal-edit :input[name="price-rate"]').val(l.id),$("#modal-edit :input[name=id]").val(t.id),$("#modal-edit :input[name=name]").val(t.name),$("#modal-edit :input[name=hotel-contract-id]").val(n.id),$("#modal-edit :input[name=contract]").parent().find(".select2-selection__rendered").html(n.name+'<span class="select2-selection__placeholder"></span>'),$("#modal-edit :input[name=client-id]").val(o.id),$("#modal-edit :input[name=client]").parent().find(".select2-selection__rendered").html(o.name+'<span class="select2-selection__placeholder"></span>'),$("#modal-edit :input[name=valid-from]").val(moment(n.valid_from,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-edit :input[name=valid-to]").val(moment(n.valid_to,"YYYY-MM-DD").format("DD.MM.YYYY")),$("#modal-edit :input[name=hotel]").val(r.name),$("#modal-edit :input[name=country-text]").val(m),$("#modal-edit :input[name=state-text]").val(p),$("#modal-edit :input[name=city-text]").val(u),$("#modal-edit :input[name=postal-code]").val(r.postal_code),$("#modal-edit :input[name=address]").val(r.address),$("#modal-edit :input[name=category]").barrating("set",r.category),$("#modal-edit :input[name=hotel-chain]").val(h),$("#modal-edit :input[name=admin-phone]").val(r.admin_phone),$("#modal-edit :input[name=admin-fax]").val(r.admin_fax),$("#modal-edit :input[name=web-site]").val(r.web_site),$("#modal-edit :input[name=turistic-licence]").val(r.turistic_licence),$("#modal-edit :input[name=email]").val(r.email),1==a.active?($("#modal-edit :input[name=active]").prop("checked","checked"),$("#modal-edit :input[name=active]").val(1)):($("#modal-edit :input[name=active]").prop("checked",""),$("#modal-edit :input[name=active]").val(0)),y.api().clear();for(v=0;v<d.length;v++)y.api().row.add([d[v].id,d[v].code+": "+d[v].name,d[v].agefrom,d[v].ageto]).draw(!1);y.api().columns.adjust().draw(),w.api().clear();for(v=0;v<s.length;v++)w.api().row.add([s[v].id,s[v].code+": "+s[v].name]).draw(!1);w.api().columns.adjust().draw(),x.api().clear();for(v=0;v<c.length;v++)x.api().row.add([c[v].id,c[v].code+": "+c[v].name,c[v].maxpax,c[v].minpax,c[v].minadult,c[v].minchildren,c[v].minchildren]).draw(!1);x.api().columns.adjust().draw(),e.preventDefault()}),$(".cancel-form").on("click",function(e){d&&(b.draw(),d=!1)}),$(".btn-search-reset").on("click",function(e){e.preventDefault(),$("#search-section :input[name=name]").val(""),$("#search-section :input[name=client]").val(""),$("#search-section :input[name=active]").val(""),$("#search-section :input[name=valid-from]").val(""),$("#search-section :input[name=valid-to]").val("")}),$(".btn-search-cancel").on("click",function(e){e.preventDefault(),$("#search-section").slideToggle()}),$("#search-section :input[name=valid-from]").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0,format:"dd.mm.yyyy",orientation:"bottom"}),$("#search-section :input[name=valid-to]").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0,format:"dd.mm.yyyy",orientation:"bottom"}),$(".btn-search-submit").on("click",function(e){e.preventDefault(),b.columns("name:name").search($("#search-section :input[name=name]").val()).columns("client:name").search($("#search-section :input[name=client]").val()).columns("valid_from:name").search($("#search-section :input[name=valid-from]").val()).columns("valid_to:name").search($("#search-section :input[name=valid-to]").val()).columns("active:name").search($("#search-section :input[name=active]").val()).draw()})});