$(document).ready(function(){var a=!1;$.fn.dataTable.ext.errMode="none";var n=$("#table").on("error.dt",function(e,a,n,t){}).on("processing.dt",function(e,a,n){App.showMask(n,$(this)),App.reloadToolTips()}).on("init.dt",function(){}).DataTable({processing:!0,serverSide:!0,sDom:"ltip",iDisplayLength:25,ajax:{url:routeRead,type:"POST",data:{from:$("#search-from").val(),to:$("#search-to").val()},complete:function(e,a){"200"!=e.status&&toastr.error("Please check your connection and try again.","Error on loading the content")}},order:[[12,"desc"]],columns:[{data:"id",name:"id",visible:!1},{data:"user_type",name:"user_type",visible:!1},{data:"user_id",name:"user_id"},{data:"user_username",name:"user_username"},{targets:"user_email",name:"user_email",data:function(e,a,n,t){return'<a href="mailto:'+e.user_email+'">'+e.user_email+"</a>"},visible:!1},{data:"user_name",name:"user_name",visible:!1},{data:"event",name:"event"},{data:"auditable_type",name:"auditable_type"},{data:"auditable_id",name:"auditable_id"},{data:"url",name:"url"},{data:"ip_address",name:"ip_address"},{data:"user_agent",name:"user_agent",visible:!1},{targets:"created_at",name:"created_at",data:function(e,a,n,t){return e.created_at}},{targets:"details",orderable:!1,name:"actions",className:"dt-center",data:function(e,a,n,t){return'<div class="dt-actions"><a class="btn btn-default btn-circle btn-icon-only btn-action dt-view" data-toggle="modal" href="#modal-info"><i class="glyphicon glyphicon-eye-open btn-action-icon"></i></a></div>'},visible:!1}]});$("#table_length").hide(),$(".search").on("click",function(e){$("#search-section").slideToggle()}),$(".reload").on("click",function(e){n.draw()}),$(".lenght-option").on("click",function(){var e=$(this).attr("data");$(this).parent().parent().prev("a").text(e);var a=$("select[name=table_length]");a.val(e),a.change()}),$(".btn-search-reset").on("click",function(e){e.preventDefault(),$("#search-section :input[name=user-id]").val(""),$("#search-section :input[name=username]").val(""),$("#search-section :input[name=email]").val(""),$("#search-section :input[name=name]").val(""),$("#search-section :input[name=event]").val(""),$("#search-section :input[name=auditable-type]").val(""),$("#search-section :input[name=auditable-id]").val(""),$("#search-section :input[name=url]").val(""),$("#search-section :input[name=user-agent]").val(""),$("#search-section :input[name=ip-address]").val(""),$("#search-section :input[name=from]").val(""),$("#search-section :input[name=to]").val("")}),$(".btn-search-cancel").on("click",function(e){e.preventDefault(),$("#search-section").slideToggle()}),$(".btn-search-submit").on("click",function(e){e.preventDefault(),n.columns("id:name").search($("#search-section :input[name=user-id]").val()).columns("user_username:name").search($("#search-section :input[name=username]").val()).columns("user_email:name").search($("#search-section :input[name=email]").val()).columns("user_name:name").search($("#search-section :input[name=name]").val()).columns("event:name").search($("#search-section :input[name=event]").val()).columns("auditable_type:name").search($("#search-section :input[name=auditable-type]").val()).columns("auditable_id:name").search($("#search-section :input[name=auditable-id]").val()).columns("url:name").search($("#search-section :input[name=url]").val()).columns("ip_address:name").search($("#search-section :input[name=ip-address]").val()).columns("user_agent:name").search($("#search-section :input[name=user-agent]").val()).draw()}),$("#table tbody").on("click",".dt-view",function(e){e.preventDefault()}),$(".cancel-form").on("click",function(e){a&&(n.draw(),a=!1)}),$(".excel").on("click",function(){var e={username:$("#search-section :input[name=username]").val(),role:$("#search-section :input[name=role]").val(),name:$("#search-section :input[name=name]").val(),email:$("#search-section :input[name=email]").val(),active:$("#search-section :input[name=active]").val()},a=routeExcel+"?"+$.param(e);window.location=a})});